# 步骤 7: 提交和推送新数据
      - name: Commit and Push new data
        # 无论前面步骤结果如何，都执行此步骤
        if: always()
        run: |
          echo "Checking for new/updated files (CSV and fund_info.csv)..."
          
          # 检查 fund_data 目录是否存在且包含 CSV 文件 (主要检查)
          # 注意：fund_info.csv 文件不在 fund_data 目录下
          if [ -d "fund_data" ] && [ "$(ls -A fund_data/*.csv 2>/dev/null | wc -l)" -gt 0 ] || [ -f "fund_info.csv" ]; then
              
              # *** 关键更新：同时添加 fund_data/*.csv 和 fund_info.csv ***
              git add fund_data/*.csv fund_info.csv || true
              
              # 检查是否有文件待提交
              if ! git diff --quiet --cached; then
                  echo "Found changes, attempting to commit..."
                  
                  # 提交信息应反映基本信息和净值的更新
                  git commit -m "🤖 chore: Update fund data and info at ${{ github.event.schedule || github.event.head_commit.timestamp || 'manual run' }}"
                  
                  # 关键修复：在推送前拉取远程最新内容并 rebase，解决冲突
                  git pull --rebase origin main 
                  
                  # 推送更改
                  git push
                  echo "Successfully committed and pushed changes."
              else
                  echo "No changes found to commit."
              fi
          else
              echo "fund_data directory not found, is empty, or no fund_info.csv generated. Skipping commit."
          fi
